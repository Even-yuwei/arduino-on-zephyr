#include "IEEE802154.hpp"

#include <mac_sap.h>
#include <mac_pib.h>
#include <AppApi.h>

#include <Arduino.h>

#define IEEE802154_DBG_PRINTF(...) DBG_PRINTF(__VA_ARGS__)
#define IEEE802154_DBG_PRINTLN(...) { DBG_PRINTF(__VA_ARGS__); DBG_PRINTF("\r\n"); }
#define IEEE802154_DBG_NL() DBG_PRINTF("\r\n")

#define IEEE802154_TRACE_FUNC

#ifdef IEEE802154_TRACE_FUNC
#define IEEE802154_DBG_FUNC_ENTER() IEEE802154_DBG_PRINTLN(__PRETTY_FUNCTION__)
#define IEEE802154_DBG_FUNC_PARAMD(x) { (void)x; IEEE802154_DBG_PRINTF(":" #x ":%d ", x) }
#define IEEE802154_DBG_FUNC_PARAMX(x) { (void)x; IEEE802154_DBG_PRINTF(":" #x ":0x%x ", x) }
#define IEEE802154_DBG_FUNC_PARAMLN(...) IEEE802154_DBG_PRINTLN(__VA_ARGS__)
#define IEEE802154_DBG_FUNC_NL() IEEE802154_DBG_NL()
#else
#define IEEE802154_DBG_FUNC_ENTER()
#define IEEE802154_DBG_FUNC_PARAM(...)
#define IEEE802154_DBG_FUNC_PARAMLN(...)
#define IEEE802154_DBG_FUNC_NL()
#endif

#ifdef IEEE802154_TRACE_STATE
#define IEEE802154_DBG_STATE(...) DBG_PRINTLN(__VA_ARGS__)
#else
#define IEEE802154_DBG_STATE(...)
#endif

/*
void IEEE802154::indicateAssociate(uint32_t addrH, uint32_t addrL, uint8_t capability)
{
	IEEE802154_DBG_FUNC_ENTER();
	IEEE802154_DBG_FUNC_PARAMD(addrH);
	IEEE802154_DBG_FUNC_PARAMD(addrL);
	IEEE802154_DBG_FUNC_PARAMD(capability);
	IEEE802154_DBG_FUNC_NL();
}
*/
void IEEE802154::indicateDisassociate(uint32_t addrH, uint32_t addrL, uint8_t  u8Reason)
{
	IEEE802154_DBG_FUNC_ENTER();
	IEEE802154_DBG_FUNC_PARAMX(addrH);
	IEEE802154_DBG_FUNC_PARAMX(addrL);
	IEEE802154_DBG_FUNC_PARAMD(u8Reason);
	IEEE802154_DBG_FUNC_NL();
}

void IEEE802154::indicateSyncLoss(uint8_t u8Reason)
{
	IEEE802154_DBG_FUNC_ENTER();
	IEEE802154_DBG_FUNC_PARAMD(u8Reason);
	IEEE802154_DBG_FUNC_NL();
}

void IEEE802154::indicateGts(uint16_t u16ShortAddr, uint8_t u8Characteristics)
{
	IEEE802154_DBG_FUNC_ENTER();
	IEEE802154_DBG_FUNC_PARAMX(u16ShortAddr);
	IEEE802154_DBG_FUNC_PARAMD(u8Characteristics);
	IEEE802154_DBG_FUNC_NL();
}

void IEEE802154::indicateBeacon()
{
	IEEE802154_DBG_FUNC_ENTER();
	IEEE802154_DBG_FUNC_NL();
}

void IEEE802154::indicateCommStatus(uint16_t u16SrcAddr, uint16_t u16DstAddr, uint8_t u8Status)
{
	IEEE802154_DBG_FUNC_ENTER();
	IEEE802154_DBG_FUNC_PARAMX(u16SrcAddr);
	IEEE802154_DBG_FUNC_PARAMX(u16DstAddr);
	IEEE802154_DBG_FUNC_PARAMD(u8Status);
	IEEE802154_DBG_FUNC_NL();
}

void IEEE802154::indicateOrphan(uint32_t addrH, uint32_t addrL)
{
	IEEE802154_DBG_FUNC_ENTER();
	IEEE802154_DBG_FUNC_PARAMX(addrH);
	IEEE802154_DBG_FUNC_PARAMX(addrL);
	IEEE802154_DBG_FUNC_NL();
}

void IEEE802154::indicateData(uint16_t u16SrcAddr, uint16_t u16DstAddr, uint8_t* au8Sdu, uint8_t u8SduLength)
{
	IEEE802154_DBG_FUNC_ENTER();
	IEEE802154_DBG_FUNC_PARAMX(u16SrcAddr);
	IEEE802154_DBG_FUNC_PARAMX(u16DstAddr);
	IEEE802154_DBG_FUNC_PARAMX(au8Sdu);
	IEEE802154_DBG_FUNC_PARAMD(u8SduLength);
	IEEE802154_DBG_FUNC_NL();
}

